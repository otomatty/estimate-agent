# PRD: 業務システム自動見積もりAIエージェント (ドラフト v0.1)

**文書ステータス:** ドラフト (担当: 私よ！アンタの代わりに書いてやったわ！, レビュアー: アンタ自身！)

**改訂履歴:**
*   v0.1 (2025-04-07): 初版作成

## 1. 概要

フリーランスや提携企業が利用することを想定した、業務システム開発の自動見積もり支援システムを構築する。Mastraフレームワークを活用し、AIエージェントとの対話を通じて要件を明確化し、見積もり精度を高めることを目指す。**ただし、AIに過度な期待は禁物。最終的な判断は人間が行う。**

## 2. 目標

*   見積もり作成プロセスの効率化
*   過去の類似案件データに基づいた、**ある程度**精度の高い概算見積もりの提示
*   ユーザー（発注者または営業担当）との対話による要件定義の支援
*   Mastraフレームワークの学習と活用

## 3. ターゲットユーザー

*   フリーランスエンジニア（主に自分自身）
*   業務提携先の企業（営業担当者など）

## 4. 要件

### 4.1. 機能要件

1.  **初期ヒアリング:**
    *   ユーザーは開発したいシステムの概要を自由記述で入力できる。
2.  **AIによる追加質問:**
    *   入力された概要に基づき、AIエージェントが追加の質問を生成・提示する。
    *   **精度向上のため、システム種類に応じた質問テンプレートやパターンを活用する。自由記述の解析だけに頼らない。**
    *   対話履歴は記憶され、文脈に沿った質問を行う (Mastra `Memory` 活用)。
    *   **[検討事項]** 過去のヒアリング事例や質問リストを `RAG` で参照させる。
3.  **機能洗い出し:**
    *   ユーザーとの対話に基づき、必要とされる機能の候補リストをAIが生成する。
4.  **コスト概算:**
    *   洗い出された機能ごとに、**過去の類似案件データ**に基づいて工数・コストを概算する。
    *   **LLMの一般知識によるテキトーな概算はNG。必ず実績データに基づくこと。** (Mastra `RAG` 活用)
    *   概算ロジックは明確に定義し、`Workflow` の `Step` として実装する。
5.  **機能選択:**
    *   AIが提示した機能リストと概算コストをユーザーが確認し、実装する機能を選択・調整できる。
6.  **見積書出力:**
    *   選択された機能に基づき、最終的な見積もり金額を算出し、見積書（PDF形式）として出力できる。
    *   見積書には、機能一覧、各機能の概算コスト、合計金額、前提条件などを含む。
7.  **データ保存:**
    *   作成された見積もりデータ（ユーザー入力、AIとの対話ログ、最終見積もり内容）はデータベースに保存される。
8.  **ビジネス価値分析:** 【新機能】
    *   見積もり結果に基づき、ビジネス的な価値を分析・可視化する。
    *   **コスト最適化:** 必要な機能のみに投資するための優先順位付けや、コスト削減可能性を示す。
    *   **投資回収計算:** システム導入によるROIの可視化と投資回収期間の予測。
    *   **業務効率化予測:** システム導入による工数削減率や年間削減時間の試算。
    *   **拡張性分析:** 将来的な機能拡張コストや推奨される拡張機能の提案。
9.  **業界ベンチマーク参照:** 【新機能】
    *   同業他社の平均的なROIや効率化指標と比較した分析結果を提示。
    *   業界ごとの標準的な投資回収期間やコスト削減率を参照。
10. **ビジネス分析レポート出力:** 【新機能】
    *   ビジネス分析結果をPDFやExcel形式で出力し、意思決定者向けの資料として活用できる。
    *   経営層向けのダッシュボード形式でビジネス指標を視覚的に表示。

### 4.2. 非機能要件

*   **見積もり精度:** **契約にそのまま使えるレベルを目指すが、初期段階では人間によるレビュー・修正を必須とする。** AIの出力を鵜呑みにしない。
*   **応答速度:** ユーザーがストレスなく対話できる程度の応答速度。
*   **UI/UX:** シンプルで分かりやすいインターフェース。ビジネス分析データはグラフや表を用いて直感的に理解できるよう表示。
*   **フレームワーク:** Mastra (TypeScript) を使用する。
*   **拡張性:** 新たな分析ロジックを追加できる柔軟な設計とする。
*   **データ更新:** 業界ベンチマークデータを定期的に更新・改善できる仕組みを持つ。

### 4.3. Mastra活用方針

*   `Agent`: ユーザーとの対話、質問生成、機能洗い出し、コスト概算のトリガー。
*   `Workflow`: ヒアリングから見積もり算出までの一連の処理フローを `Step` で管理。さらに、ビジネス分析ワークフローを追加し、ビジネス価値を算出。
*   `RAG`: 過去のプロジェクトデータ、質問テンプレート、ヒアリング事例などを参照させる。また、業界ベンチマークデータを検索・分析に活用。
*   `Memory`: 対話履歴を保持し、文脈に応じた応答を実現。
*   `Mastra Dev`: 開発時のデバッグ、`Agent` や `Workflow` の動作確認、プロンプト調整。

## 5. 将来的な拡張（今回は対象外）

*   ホームページ制作、ITコンサルティングの見積もり機能
*   より高度なAIによる必要性判断（十分なデータと検証が必要）
*   複数の見積もり結果を比較・分析する機能
*   競合他社の見積もりと比較するためのベンチマーク機能
*   クライアントの財務状況に基づいた投資判断サポート機能
*   長期的なTCO（総所有コスト）分析機能

## 6. 未解決事項・課題

*   **高品質な過去プロジェクトデータの準備・整備**
*   **機能単位の分解とコスト算出ロジックの詳細設計**
*   **的確な質問を生成するためのテンプレート/パターンの具体化**
*   **AIによる出力の妥当性を検証する方法**
*   **人間によるレビュープロセス設計**
*   **業界ベンチマークデータの収集と精度向上**
*   **ROIや効率化予測の計算ロジックの精緻化**
*   **異なる業界間での比較・分析のための正規化手法**

---